<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
    <link rel="icon" href="./logo.png" />
    <title>H&L</title>
		<style>
			html,body {
          margin: 0;
          overflow: hidden;
          background: black;
      }

      #container {
          position: relative;
          width: 100vw;
          height: 100vh;
      }

      #mask {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: radial-gradient(circle at center, transparent 40%, black 100%);
          pointer-events: none;
      }
      .card {
          opacity: 0;
          position: absolute;
          top: 50%;
          width: 50%;
          max-width: 600px;
          height: auto;
          transform: translateY(-50%);
          /* background: #aaa; */
          pointer-events: none;
          color: #eee;
      }
      .card1 {
        left: 10%;
      }
      .card2 {
        right: 10%;
      }
      .text {
        font-size: 18px;
        line-height: 30px;
      }
      .container {
          position: absolute;
          bottom: 100px;
          left: 50%;
          transform: translateX(-50%);
          width: 24px;
          height: 24px;
          opacity: 0;
      }
      .chevron {
          position: absolute;
          width: 28px;
          height: 8px;
          opacity: 0;
          transform: scale3d(0.5, 0.5, 0.5);
          animation: move 3s ease-out infinite;
      }
      .chevron:first-child {
          animation: move 3s ease-out 1s infinite;
      }
      .chevron:nth-child(2) {
          animation: move 3s ease-out 2s infinite;
      }
      .chevron:before,
      .chevron:after {
          content: ' ';
          position: absolute;
          top: 0;
          height: 100%;
          width: 51%;
          background: #fff;
      }
      .chevron:before {
          left: 0;
          transform: skew(0deg, 30deg);
      }
      .chevron:after {
          right: 0;
          width: 50%;
          transform: skew(0deg, -30deg);
      }

      #svg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        opacity: 1;
        transition: opacity 1s;
      }

      .path {
        stroke-dasharray: 3000;
        stroke-dashoffset: 0;
        animation: dash 3s linear infinite;
      }

      @keyframes dash {
        0% {
          stroke-dashoffset: 3000;
        }
        90% {
          stroke-dashoffset: 0;
        }
      }
      @keyframes move {
          25% {
              opacity: 1;
          }
          33% {
              opacity: 1;
              transform: translateY(30px);
          }
          67% {
              opacity: 1;
              transform: translateY(40px);
          }
          100% {
              opacity: 0;
              transform: translateY(55px) scale3d(0.5, 0.5, 0.5);
          }
      }
      @keyframes pulse {
          to {
              opacity: 1;
          }
      }
      @media screen and (max-device-width: 768px) {
        a, .text {
          font-size: 24px !important;
          line-height: 36px;
        }
      }
		</style>
	</head>
	<body>
    <div id="container"></div>
    <div id="mask"></div>
    <div class="container">
      <div class="chevron"></div>
      <div class="chevron"></div>
      <div class="chevron"></div>
    </div>
    <div style="position: fixed;bottom: 10px;left: 0;width: 100%;text-align: center;">
      <a href="https://beian.miit.gov.cn/" target="_blank" style="color: #888;text-decoration: unset;">赣ICP备19012553号-1</a>
    </div>
    <svg id="svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 2000 800" xml:space="preserve">
      <path class="path" stroke-linecap="round" style="stroke: rgb(255,255,255); stroke-width: 4; stroke-linecap: round; stroke-linejoin: round; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;"  d="M 611.72 494.73 C 612.89 494.43 613.82 494.27 615.9 491.75 C 617.98 489.22 619.07 487.36 622.13 482.1 C 625.19 476.84 627.03 473.3 631.2 465.46 C 635.38 457.62 637.95 453.05 643.02 442.9 C 648.09 432.75 651.06 426.32 656.56 414.7 C 662.05 403.08 665.52 396.78 670.51 384.81 C 675.5 372.84 677.99 366.33 681.51 354.86 C 685.02 343.4 686.2 337.03 688.08 327.49 C 689.96 317.94 690.61 313.79 690.92 307.12 C 691.23 300.45 691.05 296.74 689.63 294.12 C 688.21 291.51 686.11 291.54 683.82 294.05 C 681.52 296.56 680.99 299.41 678.15 306.67 C 675.32 313.93 673.31 319.15 669.64 330.35 C 665.98 341.55 663.98 348.89 659.83 362.68 C 655.68 376.46 653.03 384.93 648.89 399.26 C 644.76 413.6 642.63 421.01 639.15 434.35 C 635.67 447.68 634.19 454.65 631.48 465.95 C 628.77 477.25 626.83 482.95 625.61 490.85 C 624.4 498.76 624.55 501.68 625.4 505.48 C 626.25 509.28 627.25 510.39 629.86 509.84 C 632.47 509.3 634.18 507.49 638.44 502.75 C 642.7 498.02 645.54 493.53 651.17 486.16 C 656.8 478.79 660.02 474.05 666.58 465.91 C 673.14 457.76 677.01 453.09 683.95 445.44 C 690.9 437.8 695.1 433.58 701.31 427.69 C 707.51 421.8 710.32 419.13 714.98 416 C 719.64 412.88 721.59 412.16 724.62 412.06 C 727.65 411.95 728.51 412.53 730.12 415.49 C 731.72 418.45 732.24 421.01 732.65 426.86 C 733.06 432.7 732.59 437.24 732.16 444.72 C 731.74 452.2 731.04 456.64 730.53 464.26 C 730.02 471.88 729.11 476.08 729.61 482.82 C 730.11 489.56 730.52 492.97 733.02 497.96 C 735.53 502.96 737.24 505.4 742.14 507.8 C 747.04 510.2 750.39 510.6 757.53 509.98 C 764.68 509.35 769.05 507.78 777.85 504.67 C 786.65 501.55 791.92 499.39 801.52 494.4 C 811.12 489.41 816.32 485.94 825.87 479.72 C 835.41 473.5 840.74 469.35 849.24 463.31 C 857.75 457.27 862.49 454.11 868.38 449.5 C 874.28 444.89 877.24 443 878.72 440.27 C 880.2 437.53 878.41 435.44 875.77 435.82 C 873.14 436.19 870.47 438.41 865.54 442.14 C 860.61 445.87 856.7 448.64 851.14 454.46 C 845.58 460.29 842.05 464.39 837.75 471.27 C 833.44 478.14 831.9 482.16 829.59 488.84 C 827.27 495.53 826.26 498.98 826.17 504.69 C 826.09 510.4 826.22 513.72 829.16 517.4 C 832.1 521.08 835.32 522.5 840.87 523.08 C 846.42 523.67 849.25 523.05 856.9 520.33 C 864.55 517.62 869.22 515.51 879.13 509.51 C 889.04 503.52 895.04 499.32 906.43 490.35 C 917.82 481.39 924.26 475.64 936.07 464.68 C 947.88 453.71 954.27 447.28 965.48 435.53 C 976.68 423.79 982.68 417.43 992.11 405.95 C 1001.54 394.48 1006.3 387.92 1012.64 378.16 C 1018.98 368.41 1020.87 364.4 1023.8 357.17 C 1026.73 349.94 1027.93 346.45 1027.27 342.02 C 1026.62 337.59 1024.61 336.11 1020.51 335.02 C 1016.41 333.92 1012.85 334.06 1006.77 336.55 C 1000.69 339.04 997.03 341.39 990.1 347.47 C 983.17 353.55 978.9 357.93 972.12 366.96 C 965.34 375.99 961.71 381.71 956.2 392.62 C 950.7 403.54 948.12 409.75 944.58 421.53 C 941.04 433.3 939.82 439.93 938.51 451.49 C 937.2 463.05 937.18 469.15 938.03 479.33 C 938.87 489.51 939.88 494.3 942.73 502.38 C 945.58 510.45 947.7 514.02 952.28 519.71 C 956.86 525.4 959.86 527.96 965.64 530.83 C 971.43 533.7 974.73 534.29 981.19 534.07 C 987.65 533.86 990.81 532.77 997.96 529.77 C 1005.1 526.77 1009.18 524.39 1016.91 519.07 C 1024.63 513.74 1029 510.05 1036.6 503.14 C 1044.2 496.24 1047.9 492.05 1054.9 484.54 C 1061.9 477.04 1065.4 472.66 1071.61 465.6 C 1077.82 458.53 1080.8 454.88 1085.96 449.22 C 1091.11 443.56 1093.43 441.23 1097.38 437.31 C 1101.33 433.38 1103.34 431.85 1105.72 429.59 C 1108.09 427.34 1108.65 426.29 1109.24 426.03 C 1109.83 425.77 1109.12 425.99 1108.67 428.3 C 1108.21 430.6 1108.04 432.62 1106.95 437.54 C 1105.87 442.46 1105 445.84 1103.23 452.89 C 1101.46 459.95 1100.14 464.31 1098.11 472.82 C 1096.08 481.33 1095.13 486.64 1093.08 495.45 C 1091.03 504.26 1089.85 508.73 1087.84 516.88 C 1085.83 525.02 1084.85 528.66 1083.01 536.17 C 1081.18 543.68 1080.56 547.31 1078.66 554.42 C 1076.75 561.53 1075.88 565.03 1073.5 571.74 C 1071.12 578.44 1069.88 581.87 1066.75 587.95 C 1063.63 594.03 1061.76 597.08 1057.87 602.14 C 1053.97 607.2 1051.45 609.51 1047.26 613.23 C 1043.08 616.94 1040.6 618.73 1036.92 620.71 C 1033.24 622.69 1031.49 623.55 1028.85 623.12 C 1026.21 622.68 1025.26 622.05 1023.73 618.53 C 1022.19 615.02 1021.23 612.05 1021.18 605.55 C 1021.12 599.05 1021.34 594.42 1023.46 586.04 C 1025.59 577.65 1027.39 572.49 1031.8 563.64 C 1036.22 554.8 1039.16 550.43 1045.53 541.81 C 1051.9 533.19 1055.79 529.05 1063.65 520.54 C 1071.5 512.03 1075.92 507.69 1084.79 499.26 C 1093.65 490.83 1098.75 486.46 1107.96 478.39 C 1117.18 470.31 1121.83 466.01 1130.86 458.88 C 1139.88 451.76 1144.9 448.55 1153.09 442.76 C 1161.28 436.97 1165.07 434.25 1171.82 429.91 C 1178.56 425.57 1181.82 423.93 1186.81 421.08 C 1191.8 418.23 1193.92 417.32 1196.78 415.67 C 1199.65 414.02 1200.32 413.56 1201.16 412.85 C 1201.99 412.14 1201.79 411.67 1200.95 412.12 C 1200.12 412.56 1198.48 413.15 1196.98 415.09 C 1195.48 417.03 1194.72 418.82 1193.45 421.81 C 1192.19 424.79 1191.75 426.62 1190.65 430 C 1189.56 433.39 1188.28 435.31 1187.97 438.73 C 1187.65 442.16 1187.76 444.32 1189.07 447.12 C 1190.39 449.93 1191.85 451.26 1194.55 452.77 C 1197.24 454.29 1198.62 454.52 1202.54 454.68 C 1206.45 454.84 1209.29 454.91 1214.11 453.58 C 1218.92 452.26 1221.58 450.58 1226.61 448.06 C 1231.64 445.53 1234.16 444.08 1239.24 440.95 C 1244.33 437.82 1247.08 436.1 1252.05 432.4 C 1257.02 428.71 1259.8 426.18 1264.09 422.48 C 1268.38 418.79 1270.79 416.87 1273.51 413.93 C 1276.24 410.98 1277.42 409.3 1277.7 407.76 C 1277.98 406.22 1276.4 404.96 1274.92 406.24 C 1273.43 407.52 1272.8 409.64 1270.28 414.16 C 1267.75 418.69 1265.86 422.09 1262.3 428.85 C 1258.74 435.61 1256.72 439.72 1252.47 447.96 C 1248.23 456.21 1245.9 460.94 1241.08 470.08 C 1236.25 479.22 1233.52 484.53 1228.35 493.67 C 1223.17 502.82 1220.24 507.24 1215.19 515.82 C 1210.14 524.4 1207.99 529.04 1203.1 536.56 C 1198.22 544.09 1195.33 547.66 1190.75 553.46 C 1186.17 559.26 1183.99 561.89 1180.22 565.57 C 1176.44 569.25 1174.65 570.22 1171.89 571.86 C 1169.13 573.5 1167.63 573.49 1166.41 573.77 C 1165.2 574.05 1165.14 574.39 1165.82 573.27 C 1166.49 572.16 1167.73 571.19 1169.78 568.18 C 1171.82 565.18 1172.5 562.98 1176.04 558.25 C 1179.59 553.51 1181.58 550.7 1187.51 544.52 C 1193.44 538.35 1196.86 534.6 1205.69 527.38 C 1214.52 520.16 1220.27 516.04 1231.64 508.41 C 1243.02 500.77 1251.17 496.06 1262.56 489.2 C 1273.95 482.34 1280.33 478.92 1288.59 474.09 C 1296.86 469.27 1300.98 467.16 1303.87 465.08" />
    </svg>
    <div id="text1" class="card card1">
      <h1>
        H C L J Y
      </h1>
      <div class="text">
        我在 Amazon 当软件工程师的时候，故事是这样的：
        <br/>
        那时我和女朋友住在一起，正在家里远程工作。忽然同事给我发来了紧急消息：”我们的服务出现了 SEV 2 级别的故障！需要所有的人马上协助！“我们组的应用全挂掉了。
        <br/>
        当我还在费力的寻找修复方法的时候，忽然闻到隔壁房间的的焦味，防火报警器开始鸣叫。
      </div>
    </div>
    <div id="text2" class="card card2">
      <h1>
        L J Y H C
      </h1>
      <div class="text">
        “彦祖！着火了！快来帮忙！”我听到女朋友大喊。现在一个难题在我面前——是恢复一个重要的 Amazon 服务，还是救公寓的火。
        <br/>
        我的脑海中忽然出现了 Amazon 著名的领导力准则”客户至上“，有很多的客户还依赖我们的服务，我不能让他们失望！所以着火也不管了，女朋友喊我也无所谓，我开始 debug 这个线上问题。
      </div>
    </div>
    <div id="text3" class="card card1">
      <h1>
        H & L
      </h1>
      <div class="text">
        但是忽然，公寓的烟味消失，火警也停了。我的女朋友走进了房间，让我震惊的是，她摘下了自己的假发，她是 Jeff Bezos（Amazon 老板）假扮的！
        <br/>
        “我对你坚持顾客至上的原则感到十分骄傲”，说完，他递给我一张五美金的亚马逊礼品卡，从我家窗户翻了出去，跳上了一辆 Amazon 会员服务的小货车，一溜烟离开了。
        <br/>
        虽然现在我已不在 Amazon 工作，但这些经验我终身难忘。你们同意么？
      </div>
    </div>
    <script async src="https://unpkg.com/es-module-shims@1.8.0/dist/es-module-shims.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>

    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three/build/three.module.js",
          "three/addons/": "https://unpkg.com/three/examples/jsm/",
          "tween.js/": "https://cdnjs.cloudflare.com/ajax/libs/tween.js/"
        }
      }
    </script>
		<script type="module">
			import * as THREE from 'three';
	    import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
	    import { DRACOLoader } from 'three/addons/loaders/DRACOLoader.js';
      import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
      import * as TWEEN from 'tween.js/20.0.0/tween.esm.min.js';

      const clock = new THREE.Clock();
      const scene = new THREE.Scene();
      const renderer = new THREE.WebGLRenderer({
          antialias: true, // 抗锯齿
      });
      renderer.setSize( window.innerWidth, window.innerHeight );
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.setClearColor('#000');
      scene.background = new THREE.Color('#1b1e1e');
      document.getElementById('container').appendChild( renderer.domElement );

      // 创建解析器
      const dracoLoader = new DRACOLoader();
      dracoLoader.setDecoderPath('./draco/');
      const loader = new GLTFLoader();
      loader.setDRACOLoader(dracoLoader);

      // 创建镜头
      const width = window.innerWidth
      const height = window.innerHeight
      const scale = 500
      const camera = new THREE.OrthographicCamera( -width / scale, width / scale, height / scale, -height / scale, 1, 10 );
      camera.position.set(0, 0, 5);
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      const cameraPerspectiveHelper = new THREE.CameraHelper( camera );
      cameraPerspectiveHelper.visible = false;
			scene.add( cameraPerspectiveHelper );
      const camera2 = new THREE.PerspectiveCamera( 50, window.innerWidth / window.innerHeight, 1, 100 );
			camera2.position.z = 15;
      const controls = new OrbitControls( camera2, renderer.domElement );
      const text1 = document.getElementById("text1");
      const text2 = document.getElementById("text2");
      const text3 = document.getElementById("text3");


      let model, model2, particles, modelLight;
      const timeline1 = 6
      const timeline2 = 3.5
      const originY = 7.6
      const originScale = 0.012
      let yValue = 0;
      let rValue = 0;
      let gsapDuration = 0.3;
      let loading = true;
      const originColorMap = {}
      const originColor = []
      const originLine = []
      const gaoda = './models/gaoda2.glb'

      loadModel(gaoda);


      function loadModel(modelPath) {
        loader.load(modelPath, (gltf) => {
          model = gltf.scene;
          model.scale.set(originScale,originScale,originScale)
          model.position.set(1, -originY, 0)
          // 设置模型的初始map透明度
          model.traverse((child) => {
              if (child.isMesh) {
                originColorMap[child.id] = child.material.color.getHex()
              }
          });
          model.traverse((child) => {
              if (child.isMesh) {
                originColor.push(child.id)
                child.material.color.set(0x888888)
              } else if (child.isLineSegments) {
                originLine.push(child.id)
                child.material.opacity = 0
                child.material.transparent = true
              }
          });
          // console.log(originColorMap)
          scene.add(model);
          loading = false
          updateCameraY(0, 0)
        });
      }

      // 创建灯光
      const ambientLight = new THREE.HemisphereLight("white", "darkslategrey", 0);
      scene.add(ambientLight);

      // 创建直射光源
      const directionalLight = new THREE.DirectionalLight(0xf7f7f7, 0.4);
      directionalLight.position.set(3, 3, 3); // 设置光源位置
      scene.add(directionalLight);
      const lightHelper = new THREE.DirectionalLightHelper(directionalLight, 1);
      lightHelper.visible = false;
      scene.add(lightHelper);

      // 监听鼠标移动事件
      let mouseX = 0, mouseY = 0;
      document.addEventListener('mousemove', function(event) {
          mouseX = (event.clientX / window.innerWidth) * 2 - 1;
          mouseY = - (event.clientY / window.innerHeight) * 2 + 1;
      });

      function createParticles() {
        // 创建粒子材质
        var particleMaterial = new THREE.PointsMaterial({
            color: 0xFFFFFF,
            size: 0.9, // 点的大小
            transparent: true,
            opacity: 1,
            depthTest: false
        });
        // 创建粒子几何体
        var particleGeometry = new THREE.BufferGeometry();
        var particleCount = 1000; // 粒子数量
        // 生成随机的粒子位置
        var positions = new Float32Array(particleCount * 3);
        for (var i = 0; i < positions.length; i += 3) {
            var x = (Math.random() - 0.5) * 10;
            var y = (Math.random() - 0.5) * 10;
            var z = (Math.random() - 0.5) * 10 - 2;
            positions[i] = x;
            positions[i + 1] = y;
            positions[i + 2] = z;
        }
        // 将位置数据设置给几何体
        particleGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        // 创建粒子系统
        particles = new THREE.Points(particleGeometry, particleMaterial);
        scene.add(particles);
      }
      createParticles()


      function getOpacity(yValue, lowerRange, upperRange) {
        let opacity = 0;
        if (yValue >= lowerRange && yValue <= upperRange) {
            // 在范围内时，根据 y 值计算 opacity
            opacity = Math.abs((yValue - lowerRange) / (upperRange - lowerRange));
        }
        return opacity
      }
      function getOpacity2(yValue, lowerRange, upperRange) {
        let opacity = 0;
        if (yValue >= lowerRange && yValue <= upperRange) {
            // 在范围内时，根据 y 值计算 opacity
            opacity = 1 - Math.abs((yValue - lowerRange) / (upperRange - lowerRange));
        }
        return opacity
      }

      function scrollChange(deltaY) {
        if (loading) {
          return
        }
        yValue += deltaY * 0.003;
        yValue = Math.min(timeline1 + timeline2, Math.max(0, yValue));
        if (yValue !== 0 && yValue !== (timeline1 + timeline2) && rValue <= 6.6) {
          rValue += deltaY * 0.002;
        } else {
          rValue = yValue === 0 ? 0 : 6.6
        }
        // console.log(yValue, rValue)
        updateCameraY(yValue, rValue);
      }
      window.addEventListener('wheel', function(event) {
          // 根据滚轮事件更新 y 值
          scrollChange(event.deltaY)
      });
      // 定义变量来跟踪触摸开始时的坐标
      let startY;

      // 添加触摸开始事件监听器
      window.addEventListener('touchstart', (event) => {
          // 获取触摸的第一个触点（通常是单指触摸）
          const touch = event.touches[0];
          // 记录触摸开始时的垂直坐标
          startY = touch.clientY;
          gsapDuration = 0
      });

      // 添加触摸移动事件监听器
      window.addEventListener('touchmove', (event) => {
          // 获取触摸的第一个触点
          const touch = event.touches[0];
          // 计算垂直滑动距离
          const deltaY = touch.clientY - startY;
          // 在控制台中打印滑动距离
          console.log(`垂直滑动距离: ${deltaY}px`);
          // 在这里您可以执行滑动相关的操作
          scrollChange(-deltaY / 10)
      });

      // 添加触摸结束事件监听器
      window.addEventListener('touchend', () => {
          // 清除起始坐标
          startY = null;
      });

      // 淡入模型
      function fadeInModel(yValue) {
        const progress = getOpacity(yValue, timeline1 + 1, timeline1 + timeline2)
        const colorLength = Math.ceil(progress * originColor.length)
        const lineLength = Math.ceil(progress * originLine.length)
        const newColorArr = colorLength === 0 ? [] : originColor.slice(-colorLength)
        const newLineArr = lineLength === 0 ? [] : originLine.slice(-lineLength)
        // console.log(newColorArr, newLineArr)
        model.traverse((child) => {
          if (child.isMesh) {
            if (newColorArr.includes(child.id)) {
              child.material.color.set(originColorMap[child.id])
            } else {
              child.material.color.set(0x888888)
            }
          } else if (child.isLineSegments) {
            if (newLineArr.includes(child.id)) {
              child.material.opacity = progress
              child.material.transparent = true
            } else {
              child.material.opacity = 0
              child.material.transparent = true
            }
          }
        });
      }

      // 使用GSAP创建动画
      function updateCameraY(yValue, rValue) {
        gsap.to(scene.rotation, { duration: gsapDuration, y: rValue, ease: "power1.inOut" });
        gsap.to(model.position, { duration: gsapDuration, y: Math.min(timeline1 - originY, yValue - originY), ease: "power1.inOut" });
        if (yValue >= timeline1) {
          fadeInModel(yValue)
          const realScale = originScale * (1 - ((yValue - timeline1) / (timeline2 * 1.5)))
          gsap.to(model.scale, { duration: gsapDuration, x: realScale, y: realScale, z: realScale, ease: "power1.inOut" });
        } else {
          gsap.to(model.scale, { duration: gsapDuration, x: originScale, y: originScale, z: originScale, ease: "power1.inOut" });
        }
        // 根据 y 值展示不同的文本
        if (yValue === 0) {
          gsap.to('#svg', { duration: 0.3, opacity: 0 });
        }
        gsap.to('.container', { duration: gsapDuration, opacity: getOpacity2(yValue, 0, 0.3) });
        gsap.to(text1, { duration: gsapDuration, opacity: getOpacity2(yValue, 0, 3) });
        gsap.to(text2, { duration: gsapDuration, opacity: getOpacity(yValue, 4, 6) });
        gsap.to(text3, { duration: gsapDuration, opacity: getOpacity(yValue, timeline1 + timeline2 - 1.5, timeline1 + timeline2) });
      }
      // 创建流星数组
      var meteors = [];

      // 创建流星的函数
      function createMeteor() {
          // 创建流星的材质
          var meteorMaterial = new THREE.PointsMaterial({
              color: 0xFFFFFF,
              size: 2, // 流星的大小
              transparent: true,
              opacity: 1
          });
          // 创建流星的几何体
          var meteorGeometry = new THREE.BufferGeometry();
          // 随机生成流星的位置
          var x = Math.random() * 20 - 10;
          var y = Math.random() * 20 - 10;
          var z = Math.random() * 10 - 5;

          // 流星的轨迹，通常是一条直线
          var positions = new Float32Array([x, y, z, x - 1, y - 1, z - 1]);

          meteorGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));

          // 创建流星对象
          var meteor = new THREE.Points(meteorGeometry, meteorMaterial);

          // 将流星对象添加到场景中
          scene.add(meteor);

          // 将流星对象添加到数组中
          meteors.push(meteor);
      }

      // 创建多个流星
      var meteorCount = 10;
      for (var i = 0; i < meteorCount; i++) {
          createMeteor();
      }

      // 播放动画
      function animate() {
        requestAnimationFrame( animate );

        // 将相机的位置与鼠标位置关联
        camera.position.x += (mouseX - camera.position.x) * 0.05;
        camera.position.y += (-mouseY - camera.position.y) * 0.05;
        camera.lookAt(scene.position);

        // 在这里更新光源的方向
        const lightDirection = new THREE.Vector3(3, 3, 3); // 光源初始方向
        lightDirection.applyEuler(scene.rotation); // 将光源方向应用于场景的旋转
        directionalLight.position.copy(lightDirection); // 设置光源的位置

        // 更新流星的位置
        for (var i = 0; i < meteors.length; i++) {
            var meteor = meteors[i];
            if (meteor.position.x < -10) {
                // 如果流星移出视野，将其移除并重新生成
                meteor.geometry.attributes.position.array = [];
                createMeteor();
                scene.remove(meteor); // 从场景中移除旧的流星
                meteors.splice(i, 1); // 从数组中移除旧的流星
            } else {
                // 向左移动流星
                meteor.position.x -= 0.02;
            }
        }

        // 使粒子闪烁
        particles.rotation.x += 0.001;
        particles.rotation.y += 0.001;
        renderer.render( scene, camera );
        TWEEN.update()
        // controls.update();
        // renderer.render( scene, camera2 );
      }
      animate();
		</script>
	</body>
</html>